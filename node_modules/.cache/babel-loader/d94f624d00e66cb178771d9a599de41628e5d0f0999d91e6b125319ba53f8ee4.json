{"ast":null,"code":"import { makeAutoObservable } from 'mobx';\nclass CanvasState {\n  constructor() {\n    this.canvas = null;\n    this.undoList = [];\n    this.redoList = [];\n    makeAutoObservable(this);\n  }\n  setCanvas(canvas) {\n    this.canvas = canvas;\n  }\n  pushToUndo(data) {\n    this.undoList.push(data);\n  }\n  pushToRedo(data) {\n    this.redoList.push(data);\n  }\n  undo() {\n    console.log('1');\n    let ctx = this.canvas.getContext('2d');\n    if (this.undoList.length > 0) {\n      let dataUrl = this.undoList.pop();\n      console.log('2');\n      this.redoList.push(this.canvas.toDataURL());\n      let img = new Image();\n      img.src = dataUrl;\n      img.onload = () => {\n        ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n        ctx.drawImage(img, 0, 0, this.canvas.width, this.canvas.height);\n        console.log('3');\n      };\n    } else {\n      ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    }\n  }\n  redo() {\n    let ctx = this.canvas.getContext('2d');\n    if (this.redoList.length > 0) {\n      let dataUrl = this.redoList.pop();\n      this.undoList.push(this.canvas.toDataURL());\n      let img = new Image();\n      img.src = dataUrl;\n      img.onload = () => {\n        ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n        ctx.drawImage(img, 0, 0, this.canvas.width, this.canvas.height);\n      };\n    }\n  }\n}\nexport default new CanvasState();","map":{"version":3,"names":["makeAutoObservable","CanvasState","constructor","canvas","undoList","redoList","setCanvas","pushToUndo","data","push","pushToRedo","undo","console","log","ctx","getContext","length","dataUrl","pop","toDataURL","img","Image","src","onload","clearRect","width","height","drawImage","redo"],"sources":["C:/Users/jar50/Desktop/PaintWebsockets/src/store/canvasState.js"],"sourcesContent":["import { makeAutoObservable } from 'mobx';\r\n\r\nclass CanvasState {\r\n  canvas = null;\r\n  undoList = [];\r\n  redoList = [];\r\n\r\n  constructor() {\r\n    makeAutoObservable(this);\r\n  }\r\n\r\n  setCanvas(canvas) {\r\n    this.canvas = canvas;\r\n  }\r\n\r\n  pushToUndo(data) {\r\n    this.undoList.push(data);\r\n  }\r\n  pushToRedo(data) {\r\n    this.redoList.push(data);\r\n  }\r\n\r\n  undo() {\r\n    console.log('1');\r\n    let ctx = this.canvas.getContext('2d');\r\n    if (this.undoList.length > 0) {\r\n      let dataUrl = this.undoList.pop();\r\n      console.log('2');\r\n      this.redoList.push(this.canvas.toDataURL());\r\n      let img = new Image();\r\n      img.src = dataUrl;\r\n      img.onload = () => {\r\n        ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n        ctx.drawImage(img, 0, 0, this.canvas.width, this.canvas.height);\r\n        console.log('3');\r\n      };\r\n    } else {\r\n      ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n    }\r\n  }\r\n  redo() {\r\n    let ctx = this.canvas.getContext('2d');\r\n    if (this.redoList.length > 0) {\r\n      let dataUrl = this.redoList.pop();\r\n      this.undoList.push(this.canvas.toDataURL());\r\n      let img = new Image();\r\n      img.src = dataUrl;\r\n      img.onload = () => {\r\n        ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n        ctx.drawImage(img, 0, 0, this.canvas.width, this.canvas.height);\r\n      };\r\n    }\r\n  }\r\n}\r\n\r\nexport default new CanvasState();\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}